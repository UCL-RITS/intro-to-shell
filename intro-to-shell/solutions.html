




<!DOCTYPE html>
<!--[if IE 7]> <html lang="en" class="lt-ie9 lt-ie8 no-js"> <![endif]-->
<!--[if IE 8]> <html lang="en" class="lt-ie9 no-js"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
    <meta charset=utf-8 />
    <meta name="author" content="UCL" />
    <meta name="description" content="UCL Homepage" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- social meta -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@uclnews">
    <meta name="twitter:title" content="UCL - London's Global University">
    <meta name="twitter:description" content="UCL (University College London) is London's leading multidisciplinary university, with 8,000 staff and 25,000 students.">
    <meta name="twitter:creator" content="@UCLWAMS">
    <meta name="twitter:image:src" content="http://www.ucl.ac.uk/visual-identity/logos/standalone.png">
    <meta property="og:image" content="http://www.ucl.ac.uk/visual-identity/logos/standalone.png" />
    <meta property="og:title" content="UCL - London's Global University" />
    <meta property="og:url" content="http://www.ucl.ac.uk" />
    <meta property="og:site_name" content="UCL" />
    <meta property="og:description" content="UCL (University College London) is London's leading multidisciplinary university, with 8,000 staff and 25,000 students." />
    <meta property="og:type" content="website" />
    <meta property="og:profile_id" content="uclofficial" />
    <!-- end social meta -->

  <title>Exercise solutions</title>

  <link href="/intro-to-shell/css/screen.min.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <link href="/intro-to-shell/css/jekyll-styles.css" rel="stylesheet" type="text/css">
  <link href="/intro-to-shell/site-styles/local_styles.css" rel="stylesheet" type="text/css">
  <link href="/intro-to-shell/site-styles/ipython.css" rel="stylesheet" type="text/css">

  <link rel="shortcut icon" href="/intro-to-shell/images/favicon.ico" />
    <link rel="apple-touch-icon-precomposed" href="/intro-to-shell/favicon-152.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="/intro-to-shell/favicon-144.png">

  <script src="/intro-to-shell/js/lib/modernizr-custom.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>

    <script>
      var cuttingTheMustard = document.querySelector && window.localStorage && window.addEventListener;

      Modernizr.load({
        //cutting the mustard as used by the BBC
        test: cuttingTheMustard
        //if old browser load the shiv
        ,
        nope: [
          '/intro-to-shell/js/lib/html5shiv-printshiv.min.js', '/intro-to-shell/js/lib/respond.min.js'
        ]
      });
      //set conditional assets for main.js
      var globalSiteSpecificVars = {
        pathToJquery: "/intro-to-shell/js/lib/jquery-1.9.1.min",
        googleAnalyticsIdsArray: [] //specify array of site specific id's NOT UCL generic UA-943297-1
      }
      if (cuttingTheMustard) {
        globalSiteSpecificVars.pathToJquery = '/intro-to-shell/js/lib/jquery-2.1.1.min';
      }
    </script>
    <script src="/intro-to-shell/js/lib/require.min.js"></script>
    <script src="/intro-to-shell/js/main.js"></script>
    <script>
      require.config({
        baseUrl: '/intro-to-shell/js/lib'
      });
        require(["app/general", "app/searchWithAutoComplete", "app/tabs"]);//load the default stuff
    </script>
</head>

<body id="index" class="layout-vertical layout-vertical--nav-1col">

  <header class="header header--desktop">

  <a class="header__close" href="#">
    <img src="/intro-to-shell/images/close.png" class="lazy" data-src="//static.ucl.ac.uk/indigo/images/close.png" alt="X" />Close</a>

  <div class="masthead">

  <div class="wrapper clearfix">

      <div class="masthead__search">
					<form action="#" method="get">
						<div class="search-form">
							<input type="search" placeholder="Search UCL websites, people and more" class="search-form__input search-form__input--search" value="">
						</div>
						<input type="submit" name="sumbit" value="Go" class="btn search-form__input search-form__input--submit" />
					</form>
				</div>


				<nav class="masthead__nav m-clear">
					<ul class="masthead__list">
						<li class="masthead__item"><a href="index.php" class="masthead__link">UCL Home</a>
						</li>
						<li class="masthead__item"><a href="prospective-students.php" class="masthead__link">Prospective students</a>
						</li>
						<li class="masthead__item"><a href="current-students.php" class="masthead__link">Current students</a>
						</li>
						<li class="masthead__item"><a href="staff.php" class="masthead__link">Staff</a>
						</li>
					</ul>
				</nav>
			</div>

</div><!-- end .masthead -->


  <div class="wrapper">

    <div class="photograph">
  <div class="brand">
    <p class="brand__heading">Introduction to the Unix shell</p>
    <a href="/" class="brand__link"><span class="visually-hidden">Home</span></a>
    <img src="//cdn.ucl.ac.uk/img/blank.gif" data-src="//static.ucl.ac.uk/indigo/images/ucl-logo.svg" alt="UCL logo" id="logo" class="brand__logo lazy">  
  </div>
</div>


    <div class="sidebar">

      <nav class="nav nav--mobile">
        <ul>
          




        </ul>
      </nav>

      <nav class="nav nav--left">
        <ul>
          

<li class="active"> <a href="/intro-to-shell/intro-to-shell/">Course Content</a><ul> <li class="active"> <a href="/intro-to-shell/intro-to-shell/intro-to-shell.html">Course slides</a> </li> <li class="active"> <a href="/intro-to-shell/intro-to-shell/quick-reference.html">Quick reference</a> </li> <li class="active"> <a href="/intro-to-shell/intro-to-shell/solutions.html">Exercise solutions</a> </li></ul> </li> 

        </ul>
      </nav>

    </div>
    <!-- end .sidebar -->

    <nav class="nav nav--top">
      <ul>
        
      </ul>
    </nav>

  </div>
  <!-- end .wrapper -->

  </header>
  <!-- end .header -->

  <div class="site-content wrapper">

    <header class="header header--mobile default-header">
      <a class="header__open" href="#">
        <img src="/intro-to-shell/images/ucl-menu.svg" alt="Menu" />
      </a>
    </header>

    <div class="site-content__inner clearfix">
      <div class="site-content__body">

          <nav class="breadcrumb clearfix">
            <ul class="breadcrumb__list">
              <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/">UCL</a></li>

  
    <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/ISD">ISD</a></li>
  
    <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/isd/services">Our services</a></li>
  
    <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/isd/services/research-it">Research IT</a></li>
  
    <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/isd/services/research-it/training">Training</a></li>
  

<li class="breadcrumb__item"><a href="/intro-to-shell/">Intro to shell</a></li>



            </ul>
          </nav>
         <div class="site-content__main">
          
          
          

    <h2>Exercise</h2>

<p>The shell-training folder has the following structure:</p>

<p>~/shell-training
|--animals
|--data
|--docs
|--scripts</p>

<ol>
<li>What is the absolute path to the docs directory? Use the absolute path to change into this directory</li>
<li>From there, list the contents of the animals directory using a relative path</li>
</ol>

<h2>Solution</h2>

<ol>
<li><code>cd /home/&lt;username&gt;/shell-training/docs</code></li>
<li><code>ls ../animals</code></li>
</ol>

<h2>Exercise</h2>

<p>Write a script that will do the following steps: a. Create a new directory called cake inside your home directory b. Use an absolute path to create a directory inside cake called &quot;Cheesecake&quot; c. Change into the Cheesecake directory d. Use a relative path to create another directory inside cake called &quot;Battenberg&quot; e. Return to the home directory and list the contents of cake</p>

<p>The final set of directories should look like this:
<code>
~/cake 
|--Cheesecake
|--Battenberg
</code></p>

<h2>Solution</h2>

<p>The script:
<code>
mkdir ~/cake
mkdir /home/&lt;username&gt;/cake/Cheesecake
cd /home/&lt;username&gt;/cake/Cheesecake
mkdir ../Battenberg
cd ~
ls cake
</code></p>

<h2>Exercise</h2>

<p>Read the man page for mkdir to find out what the -p option does. Use it to create the following set of directories with a single command:
<code>
~/bread
|--focaccia
|--naan 
</code></p>

<h2>Solution</h2>

<p>The -p option will make parent directories as needed. Use two arguments to make the two sub directories, and the -p option creates the bread directory automatically.</p>
<div class="highlight"><pre><code class="language-" data-lang="">mkdir -p ~/bread/focaccia ~/bread/naan
</code></pre></div>
<h2>Exercise</h2>

<p>Use grep to search through all of the files in the animal directory to find animals with the word red in their name. Read the man page to find out how to make grep only select the word red, and not just any word containing r-e-d.</p>

<h2>Solution</h2>

<p>The man page for grep says the -w option will select only those lines containing matches that form whole words.</p>
<div class="highlight"><pre><code class="language-" data-lang="">grep -w red *.txt
</code></pre></div>
<h2>Exercise</h2>

<p>The docs directory contains several files ending in &quot;.txt&quot;. Write a backup script that will create a backups folder and copy each of these files there.</p>

<ul>
<li>Run the script</li>
<li>Delete two of the original text files and use nano to edit another</li>
<li>Use sdiff to compare the file you&#39;ve changed with the backed up version</li>
<li>Read the cp man page to find out how to restore the deleted files from the backup folder without overwriting the changes you have made to the other files</li>
</ul>

<h2>Solution</h2>

<p>The script (backup.sh):</p>
<div class="highlight"><pre><code class="language-" data-lang="">mkdir -p ~/shell-training/docs/backup
cp ~/shell-training/docs/*.txt ~/shell-training/docs/backup
</code></pre></div>
<p>Restore deleted files without overwriting:</p>
<div class="highlight"><pre><code class="language-" data-lang="">cp -n ~/shell-training/docs/backup/* ~/shell-training/docs/
</code></pre></div>
<h2>Exercise</h2>

<ol>
<li>Use the wget command to download Alice&#39;s Adventures in Wonderland: https://www.gutenberg.org/files/11/11.txt</li>
<li>Use less to read the file, search for specific words, and step through the results</li>
<li>Use grep to print lines containing a specific word or phrase to the screen; e.g. how many times is the Cheshire Cat mentioned?</li>
<li>Use sed to replace every instance of Alice with your own name, and redirect the result to a new file.</li>
<li>Using a combination of head and tail, find lines 325-335</li>
</ol>

<h2>Solution</h2>
<div class="highlight"><pre><code class="language-" data-lang="">wget https://www.gutenberg.org/files/11/11.txt
less 11.txt
grep "Cheshire Cat" 11.txt
sed 's/Alice/YourName/g' 11.txt &gt; YourName.txt
head -n 335 11.txt | tail
</code></pre></div>
<h2>Exercise</h2>

<ul>
<li>In the docs directory, create a variable called files listing all of the text files.</li>
<li>Loop through this list and print out the first line from each file.</li>
</ul>

<h2>Solution</h2>
<div class="highlight"><pre><code class="language-" data-lang="">cd ~/shell-training/docs
files=$(ls)
for file in $files; do head -n 1 $file; done
</code></pre></div>
<h2>Exercise</h2>

<ul>
<li>Use a for loop to create five directories called calculation_?, where ? is a number.</li>
<li>Use a loop to create five directories, each one the parent of the next.</li>
</ul>

<h2>Solution</h2>
<div class="highlight"><pre><code class="language-" data-lang="">for ((i=1;i&lt;=5;i++)); do mkdir calculation_$i; done
</code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">for ((i=1;i&lt;=5;i++)); do mkdir calculation_$i; cd calculation_$i; done
</code></pre></div>
<h2>Exercise</h2>

<ul>
<li>Find a partner who is in the same group as you. Use the groups command to check.</li>
<li>In your home directory, create a new directory and give members of your group write access to it, but take away read access.</li>
<li>Tell your partner the absolute path to the directory you&#39;ve given them write access to.</li>
<li>Share files by copying them to each other&#39;s shared directories.</li>
</ul>

<h2>Solution</h2>
<div class="highlight"><pre><code class="language-" data-lang="">mkdir ~/group
chmod g+w-r ~/group
cp &lt;file&gt; /home/&lt;username&gt;/group
</code></pre></div>
<h2>Exercise</h2>

<p>The data folder contains 200 files. Each file is named according to a type of measurement (A or B), and a location (1-100) e.g. A21, B56 etc. The scripts folder contains a python script which takes the names of an A and a B file as arguments e.g. scripts/calculatescore.py data/A<em>1 data/B</em>1 This will calculate a score based on the data in the two files and print it to standard output along with the name of the files used.</p>

<ol>
<li>Make calculate_score.py executable</li>
<li>Use a for loop to run through the data files corresponding to each location and generate a score</li>
<li>Modify the for loop to save the scores to a file</li>
<li>Use the sort command to find the location with the highest score</li>
</ol>

<h2>Solution</h2>
<div class="highlight"><pre><code class="language-" data-lang="">cd ~/shell-training
chmod u+x scripts/calculate_score.py
for ((i=1;i&lt;=100;i++))
do
scripts/calculate_score.py data/A_$i data/B_$i &gt;&gt; results
done
sort results
</code></pre></div>
<p>Location 80 has the highest score with 0.18</p>

<h2>Exercise</h2>

<p>You can now control the number of times a for loop iterates by including a number as an argument when you call it. Write a script which will create as many numbered directories as you want when you run it.</p>

<h2>Solution</h2>

<p>The script (n-dirs.sh):</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="c">#!/bin/bash</span>

<span class="nb">echo </span>Creating <span class="nv">$1</span> directories...

<span class="k">for</span> <span class="o">((</span> <span class="nv">i</span><span class="o">=</span>1 ; i&lt;<span class="o">=</span><span class="nv">$1</span> ; i++ <span class="o">))</span>
<span class="k">do
</span>mkdir directory_<span class="nv">$i</span>
<span class="k">done

</span><span class="nb">echo </span>Finished!
</code></pre></div>
<p>Running the script:</p>
<div class="highlight"><pre><code class="language-" data-lang="">[user@host ~]$ chmod +x n-dirs.sh
[user@host ~]$ ./n-dirs.sh 8
Creating 8 directories...
Finished!
</code></pre></div>
<h2>Exercise</h2>

<ul>
<li>Write your own <strong>mid</strong> command which will print a selection of lines from the middle of a file depending on the arguments you pass to it.</li>
</ul>

<h2>Solution</h2>

<p>The script:</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="c">#!/bin/bash</span>

head -<span class="nv">$2</span> <span class="nv">$3</span> | tail -<span class="k">$((</span><span class="nv">$2</span> <span class="o">-</span> <span class="nv">$1</span> <span class="o">+</span> <span class="m">1</span><span class="k">))</span>
</code></pre></div>
<p>Running the script:</p>
<div class="highlight"><pre><code class="language-" data-lang="">[user@host docs]$ chmod +x mid.sh
[user@host docs]$ ./mid.sh 5 8 cake.txt
such as pastries, meringues, custards and pies.

Typical cake ingredients are flour, sugar, eggs, and butter
or oil, with some recipes also requiring additional liquid
</code></pre></div>
<ul>
<li>In this example \$1 is the first line, \$2 is the second, and \$3 is the name of the file</li>
</ul>

<p>A more complete solution using getopts to handle named options:</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="c">#!/bin/bash</span>

<span class="k">if</span> <span class="o">(</span> ! <span class="nb">getopts</span> <span class="s2">":s:e:f:"</span> opt<span class="o">)</span>; <span class="k">then
        </span><span class="nb">echo</span> <span class="s2">"Usage: </span><span class="sb">`</span>basename <span class="nv">$0</span><span class="sb">`</span><span class="s2"> options (-s value) (-e value) (-f filename)"</span>;
        <span class="nb">exit</span> <span class="nv">$E_OPTERROR</span>;
<span class="k">fi

while </span><span class="nb">getopts</span> <span class="s2">":s:e:f:"</span> opt; <span class="k">do
    case</span> <span class="nv">$opt</span> <span class="k">in
        </span>s<span class="p">)</span>
          <span class="nv">start</span><span class="o">=</span><span class="nv">$OPTARG</span> &gt;&amp;2
          <span class="p">;;</span>
        e<span class="p">)</span>
          <span class="nv">end</span><span class="o">=</span><span class="nv">$OPTARG</span> &gt;&amp;2
          <span class="p">;;</span>
        f<span class="p">)</span>
          <span class="nv">filename</span><span class="o">=</span><span class="nv">$OPTARG</span> &gt;&amp;2
          <span class="p">;;</span>
        <span class="se">\?</span><span class="p">)</span>
          <span class="nb">echo</span> <span class="s2">"Invalid option: -</span><span class="nv">$OPTARG</span><span class="s2">"</span> &gt;&amp;2
          <span class="nb">exit </span>1
          <span class="p">;;</span>
        :<span class="p">)</span>
          <span class="nb">echo</span> <span class="s2">"Option -</span><span class="nv">$OPTARG</span><span class="s2"> requires an argument."</span> &gt;&amp;2
          <span class="nb">exit </span>1
          <span class="p">;;</span>
    <span class="k">esac</span>
<span class="k">done

</span>head -<span class="nv">$end</span> <span class="nv">$filename</span> | tail -<span class="k">$((</span><span class="nv">$end</span> <span class="o">-</span> <span class="nv">$start</span> <span class="o">+</span> <span class="m">1</span><span class="k">))</span>
</code></pre></div>


        </div>

      </div>
    </div>

  </div>
  <!-- end .site-content -->

  <footer class="footer wrapper">
  <div class="footer__inner clearfix">
             <article class="block block--col-1">
                <h2 class="as-h5">Facilities</h2>
                <ul class="footer__list list-unstyled">
					<li class="footer__item"><a href="http://www.ucl.ac.uk/departments/faculties">Faculties and departments</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/library/">Library</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/museums">Museums and Collections</a></li>
					<li class="footer__item"><a href="http://www.thebloomsbury.com/">UCL Bloomsbury Theatre</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/maps">Maps and buildings</a></li>
				</ul>
            </article>
            <article class="block block--col-2">
                <h2 class="as-h5">Locations</h2>
                <ul class="footer__list list-unstyled">
					<li class="footer__item"><a href="http://www.ucl.ac.uk/london">UCL and London</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/australia">UCL Australia</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/qatar">UCL Qatar</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/global">UCL Global</a></li>
				</ul>
            </article>
            <article class="block block--col-3">
                <h2 class="as-h5">Connect with us</h2>
                <ul class="footer__list list-unstyled">
					<li class="footer__item"><a href="http://www.ucl.ac.uk/alumni">Alumni</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/enterprise">Businesses</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/media">Media Relations</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/hr/jobs/">Jobs</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/makeyourmark">Give to UCL</a></li>
				</ul>

      </article>
  
    <hr class="clear">
    <ul class="footer__list list-unstyled zero-bottom">
      <li class="footer__item text-muted small">University College London,&nbsp;Gower Street,&nbsp;London,&nbsp;WC1E 6BT&nbsp;Tel:&nbsp;+44&nbsp;(0)&nbsp;20 7679 2000</li>
    </ul>
    <ul class="list-inline footer__list list-unstyled list-inline--divided">
      <li class="text-muted small">Copyright © 2016-06-23 13:25:06 +0000 UCL</li>
      <li class="text-muted small"><a href="#">Disclaimer</a>
      </li>
      <li class="text-muted small"><a href="#">Freedom of Information</a>
      </li>
      <li class="text-muted small"><a href="#">Accessibility</a>
      </li>
      <li class="text-muted small"><a href="#">Privacy</a>
      </li>
      <li class="text-muted small"><a href="#">Cookies</a>
      </li>
      <li class="text-muted small"><a href="#">Contact Us</a>
      </li>
    </ul>
  </div>
</footer>


  <script src="/intro-to-shell/js/lib/require.min.js"></script>
  <script src="/intro-to-shell/js/main.js"></script>
    <script>
      require.config({
        baseUrl: '/intro-to-shell/js/lib'
      });
        require(["app/general", "app/searchWithAutoComplete", "app/tabs"]);//load the default stuff
    </script>

</body>

</html>

